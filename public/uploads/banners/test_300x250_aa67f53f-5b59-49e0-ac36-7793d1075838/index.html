<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="ad.size" content="width=300,height=600" />
  <title>Architecton</title>
  <link rel="stylesheet" href="https://fonts.googleapis.com/icon?family=Material+Icons" />
  <script src="https://s0.2mdn.net/ads/studio/cached_libs/gsap_3.5.1_min.js"></script>
  <script src="https://s0.2mdn.net/ads/studio/Enabler.js"></script>
  <link rel="stylesheet" href="css/style.css" />
</head>

<body>
  <div id="banner">
    <img src="assets/bg.jpg" alt="bg" class="bg">
    <img src="assets/a.png" alt="title" class="title" id="a">
    <img src="assets/r.png" alt="title" class="title" id="r">
    <img src="assets/c.png" alt="title" class="title" id="c">
    <img src="assets/h.png" alt="title" class="title" id="h">
    <img src="assets/i.png" alt="title" class="title" id="i">
    <img src="assets/t.png" alt="title" class="title" id="t">
    <img src="assets/e.png" alt="title" class="title" id="e">
    <img src="assets/c2.png" alt="title" class="title" id="c2">
    <img src="assets/t2.png" alt="title" class="title" id="t2">
    <img src="assets/o.png" alt="title" class="title" id="o">
    <img src="assets/n.png" alt="title" class="title" id="n">

    <img src="assets/icon.png" alt="icon" id="icon">
    <img src="assets/film1.png" alt="film" class="film">
    <img src="assets/film2.png" alt="film" class="film">

    <img src="assets/text.png" alt="text" id="text">
    <img src="assets/quote.png" alt="quote" class="quote">
    <img src="assets/cta.png" alt="cta" class="cta">

    <div id="video-player" class="video-wrapper">
      <video id="video" playsinline autoplay muted disablepictureinpicture controlslist="nodownload">
        <source src="assets/video.mp4" type="video/mp4" />
      </video>
      <div class="video-controls">
        <button id="toggle" class="btn">
          <i class="material-icons">pause</i>
        </button>
        <button id="full_screen" class="btn">
          <i class="material-icons fullScreen">fullscreen</i>
        </button>
        <button id="sound" class="btn">
          <i class="material-icons">volume_up</i>
        </button>
      </div>
    </div>
  </div>
  <!-- Studio code starts from here. -->

  <script>
    function myFunc() {
      // @variables
      const player = document.querySelector("#video-player");
      const elem = document.querySelector("#video");
      const video = player.querySelector("#video");
      const toggle = player.querySelector("#toggle");
      const sound = player.querySelector("#sound");
      const full_screen = player.querySelector("#full_screen");

      // @icons
      const playIcon = `<i class="material-icons">play_arrow</i>`;
      const pauseIcon = `<i class="material-icons">pause</i>`;
      const volumeUp = `<i class="material-icons">volume_up</i>`;
      const volumeOff = `<i class="material-icons">volume_off</i>`;
      const replayIcon = `<i class="material-icons">replay</i>`;
      const full_screenIcon = `<i class="material-icons">fullscreen</i>`;

      // play or pause
      function togglePlay(e) {
        e.stopPropagation();
        const playOrPause = video.paused ? "play" : "pause";
        video[playOrPause]();
      }

      // check if video is playing or in pause & update icon accordingly
      function updatePlayPause(e) {
        e.stopPropagation();
        const playPauseIcon = this.paused ? playIcon : pauseIcon;
        toggle.innerHTML = playPauseIcon;
      }

      // check if video is muted or in not & update icon accordingly
      if (video.hasAttribute('muted')) {
        const soundIcon = video.muted ? volumeOff : volumeUp;
        sound.innerHTML = soundIcon;
      }

      function toggleSound(e) {
        e.stopPropagation();
        const soundIcon = video.muted ? volumeUp : volumeOff;
        sound.innerHTML = soundIcon;

        if (video.muted) video.muted = false;
        else video.muted = true;
      }

      // when video will finished show the replay icon instead of play or pause icon
      function updateReplay(e) {
        e.stopPropagation();
        toggle.innerHTML = replayIcon;
      }

      function enableFullScreen(e) {
        e.stopPropagation();
        if (elem.requestFullscreen) {
          elem.requestFullscreen();
        } else if (elem.webkitRequestFullscreen) {
          /* Safari */
          elem.webkitRequestFullscreen();
        } else if (elem.msRequestFullscreen) {
          /* IE11 */
          elem.msRequestFullscreen();
        }
      }

      // event listeners
      video.addEventListener("play", updatePlayPause);
      video.addEventListener("pause", updatePlayPause);
      video.addEventListener("ended", updateReplay);
      toggle.addEventListener("click", togglePlay);
      sound.addEventListener("click", toggleSound);
      full_screen.addEventListener("click", enableFullScreen);
    }
    window.onload = function () {
      if (Enabler.isInitialized()) {
        enablerInitHandler();
      } else {
        Enabler.addEventListener(
          studio.events.StudioEvent.INIT,
          enablerInitHandler
        );
      }

      myFunc();

      var tl = gsap.timeline({
        repeat: 0,
        repeatDelay: 4
      });

      tl
          
        .to('img', { duration: 0, display:'block'})

            .to('.title', { duration: 0.6, rotationY: 0, opacity: 1, stagger:0.15,  ease: 'power1.out'},"+=0.35")
            .to('#icon', { duration: 0.25, scale: 1, opacity: 1, ease: 'power2.out'}, )
            .to('.film', { duration: 0.5, y: 0, opacity: 1, stagger: 0.25, ease: 'power2.out'})    
            .to("#video-player", { duration: 0.5, display: "block", ease: "power0.none" }, '+=0.2')      
            .to('#text', { duration: 0.65, y: 0, opacity: 1, ease: 'power2.out'})
            .to('.quote', { duration: 1, y: 0, opacity: 1, ease: 'power2.out'})

            .to('.cta', { duration: 0.65, opacity: 1, scale: 1, ease: 'power2.out'}, '+=0.25')

            .to('.cta', {duration: 0.3, scale: 1.05, yoyo: true, repeat: 3, ease: 'power2.out'}, '+=0.85')

            .to('.cta', {duration: 0.3, scale: 1.05, yoyo: true, repeat: 3, ease: 'power2.out'}, '+=0.75')

      function videoPlayPause() {
        if (!video.play()) {
          video.play()
        } else {
          video.play()
        }
      }

    };

    function enablerInitHandler() {}

    var banner = document.getElementById("banner");

    banner.addEventListener("click", exitClickHandler);

    function exitClickHandler() {
      Enabler.exit("Click through works");
      if (video.play()) {
        video.pause();
      }
    }
  </script>

</body>

</html>